<DOCTYPE! html>
<html>
    <head>
        <title>Fesh Transportation Management</title>
        <meta content="HTML,CSS,XML,XHTML,Javascript" name="keywords"/>
	<meta content="Transportation Management System" name="description"/> 
	<meta charset="UTF-8"/>
	<meta content="Ogbu Paschal" name="author"/>
    <meta content="width=devive-width,intial-scale=1" name="viewport"/>
    <link rel="stylesheet" href="fesh.css">
    
</head>
<body>
    <div class="wrapper">
    <nav class="navbar">
        <logo> Og Transport Management System </logo>
             <ul>
                <li><a href="Fesh.html">Og TMS</a></li>
                <li><a href="#">Contact Us</a></li>
                <li><a href="#">About</a></li>
            </ul>
    </nav>
    


    <div class="main">
    <div class="register">

        <h2>Register Here</h2>
        
<form class="form" id="myForm" >


    

        <label>Username</label>
        <input type="string" placeholder="Username" name="username" max_length="150" id="username" read_only="false" help_text="Required. 150 characters or fewer.letters,digits and @/*/+/-/_ only." required>
        <br><br>
        <label>email</label>
        <input type="email" placeholder="Enter your valid email" name="email" id="email" required>
        <br><br>
        <label>Phone</label>
        <input type="string" placeholder="Enter your phone number" name="phone" id="phone" max_length="11" read_only="false" required>
        <br><br> 
        <label>address</label>
        <input type="string" placeholder="Enter your address" name="address" id="address" required>
        <br><br>
        <label>State</label>
        <input type="string" placeholder="enter your state" name="state" id="state" required>
        <br><br>
        <label>password</label>
        <input type="string" placeholder="password" name="password" id="password" required>
        <br><br>
        <label>password2</label>
        <input type="string" placeholder="password2" name="password2" id="password2" required>  
        <br><br>
        <input  type="submit" value="submit" name="submit">
        <p>already have an account? <a href="login.html">login</a> </p>
    
        <div id="res"></div><br>
        <div id="pes"></div><br>
        <div id="des"></div>
    
        </form>
        </body>
        </html>
    
    
        <script>
            document.getElementById("myForm").addEventListener('submit', myForm);
                
            function myForm(e){
                e.preventDefault();
                 
                let username = document.getElementById('username').value;   
                let email = document.getElementById('email').value;
                let phone = document.getElementById('phone').value;
                let address = document.getElementById('address').value;
                let state = document.getElementById('state').value;
                let password = document.getElementById('password').value;
                let password2 = document.getElementById('password2').value;
            fetch("https://nbtms.pythonanywhere.com/api/staff/register/",{
                method:'POST',
                headers: {
                    'Accept': 'application/json, text/plain, */*',
                    'Content-type' : 'application/json'
                },
                body:JSON.stringify({username:username,email:email,phone:phone,address:address,state:state,password:password,password2:password2})
             } )
            
     
     
     
             .then((res) => res.json())
        
        .then((result) => {

           document.getElementById("res").innerHTML = ("username" , result.username);
          document.getElementById("pes").innerHTML = ("Email already exists, please login");
         // document.getElementById("des").innerHTML = ("password", result.password);
            
            
            console.log(result);
        })
        .catch(error => console.log('error', error));  
        
    }
    
 </script>